! Copyright (C) 2020 Doug Coleman.
! See http://factorcode.org/license.txt for BSD license.
USING: tools.test semver ;
IN: semver.tests

! From rust semver
CONSTANT: semver-test-versions {
    "0.0.1"
    "0.1.0"
    "1.0.0"
    "1.0.0-beta1"
    "1.0.0-beta.1"
    "1.0.0+129384712983"
    "1.0.0-beta.1+1234.5678"
}

! From rust semver
CONSTANT: semver-test-requirements {
    "^1.0.0"
    "= 1.0.0"
    "= 0.9.0"
    "= 0.1.0-beta2.a"
    ">= 1.0.0"
    ">= 2.1.0-alpha2"
    "< 1.0.0"
    "<= 2.1.0-alpha2"
    "^ 1.2.3+meta"
    "= 1.2.3+meta"
    "> 1.2.3+meta"
    ">= 1.2.3+meta"
    "< 1.2.3+meta"
    "<= 1.2.3+meta"
    "~ 1.2.3+meta"
    "> 0.0.9 <= 2.5.3"
    "0.3.0 0.4.0"
    "<= 0.2.0 >= 0.5.0"
    "0.1.0 0.1.4 0.1.6"
    ">=0.5.1-alpha3 <0.6"
    "~1"
    "~1.2"
    "~1.2.2"
    "~1.2.3-beta.2"
    "^1"
    "^1.1"
    "^1.1.2"
    "^0.1.2"
    "^0.5.1-alpha3"
    ""
    "*"
    "x"
    "1.*"
}

CONSTANT: valid-semvers {
    "0.0.4"
    "1.2.3"
    "10.20.30"
    "1.1.2-prerelease+meta"
    "1.1.2+meta"
    "1.1.2+meta-valid"
    "1.0.0-alpha"
    "1.0.0-beta"
    "1.0.0-alpha.beta"
    "1.0.0-alpha.beta.1"
    "1.0.0-alpha.1"
    "1.0.0-alpha0.valid"
    "1.0.0-alpha.0valid"
    "1.0.0-alpha-a.b-c-somethinglong+build.1-aef.1-its-okay"
    "1.0.0-rc.1+build.1"
    "2.0.0-rc.1+build.123"
    "1.2.3-beta"
    "10.2.3-DEV-SNAPSHOT"
    "1.2.3-SNAPSHOT-123"
    "1.0.0"
    "2.0.0"
    "1.1.7"
    "2.0.0+build.1848"
    "2.0.1-alpha.1227"
    "1.0.0-alpha+beta"
    "1.2.3----RC-SNAPSHOT.12.9.1--.12+788"
    "1.2.3----R-S.12.9.1--.12+meta"
    "1.2.3----RC-SNAPSHOT.12.9.1--.12"
    "1.0.0+0.build.1-rc.10000aaa-kk-0.1"
    "99999999999999999999999.999999999999999999.99999999999999999"
    "1.0.0-0A.is.legal"
}

CONSTANT: semver-ranges {
    { "1.0.0 - 2.0.0" ">=1.0.0 <=2.0.0" }
    { "1.0.0 - 2.0.0" ">=1.0.0-0 <2.0.1-0" }
    { "1 - 2" ">=1.0.0 <3.0.0-0" }
    { "1 - 2" ">=1.0.0-0 <3.0.0-0" }
    { "1.0 - 2.0" ">=1.0.0 <2.1.0-0" }
    { "1.0 - 2.0" ">=1.0.0-0 <2.1.0-0" }
    { "1.0.0" "1.0.0" }
    { ">=*" "*" }
    ! { "" "*" }
    { "*" "*" }
    { "*" "*" }
    { ">=1.0.0" ">=1.0.0" }
    { ">1.0.0" ">1.0.0" }
    { "<=2.0.0" "<=2.0.0" }
    { "1" ">=1.0.0 <2.0.0-0" }
    { "<=2.0.0" "<=2.0.0" }
    { "<=2.0.0" "<=2.0.0" }
    { "<2.0.0" "<2.0.0" }
    { "<2.0.0" "<2.0.0" }
    { ">= 1.0.0" ">=1.0.0" }
    { ">=  1.0.0" ">=1.0.0" }
    { ">=   1.0.0" ">=1.0.0" }
    { "> 1.0.0" ">1.0.0" }
    { ">  1.0.0" ">1.0.0" }
    { "<=   2.0.0" "<=2.0.0" }
    { "<= 2.0.0" "<=2.0.0" }
    { "<=  2.0.0" "<=2.0.0" }
    { "<    2.0.0" "<2.0.0" }
    { "<\t2.0.0" "<2.0.0" }
    { ">=0.1.97" ">=0.1.97" }
    { ">=0.1.97" ">=0.1.97" }
    { "0.1.20 || 1.2.4" "0.1.20||1.2.4" }
    { ">=0.2.3 || <0.0.1" ">=0.2.3||<0.0.1" }
    { ">=0.2.3 || <0.0.1" ">=0.2.3||<0.0.1" }
    { ">=0.2.3 || <0.0.1" ">=0.2.3||<0.0.1" }
    { "||" "*" }
    { "2.x.x" ">=2.0.0 <3.0.0-0" }
    { "1.2.x" ">=1.2.0 <1.3.0-0" }
    { "1.2.x || 2.x" ">=1.2.0 <1.3.0-0||>=2.0.0 <3.0.0-0" }
    { "1.2.x || 2.x" ">=1.2.0 <1.3.0-0||>=2.0.0 <3.0.0-0" }
    { "x" "*" }
    { "2.*.*" ">=2.0.0 <3.0.0-0" }
    { "1.2.*" ">=1.2.0 <1.3.0-0" }
    { "1.2.* || 2.*" ">=1.2.0 <1.3.0-0||>=2.0.0 <3.0.0-0" }
    { "*" "*" }
    { "2" ">=2.0.0 <3.0.0-0" }
    { "2.3" ">=2.3.0 <2.4.0-0" }
    { "~2.4" ">=2.4.0 <2.5.0-0" }
    { "~2.4" ">=2.4.0 <2.5.0-0" }
    { "~>3.2.1" ">=3.2.1 <3.3.0-0" }
    { "~1" ">=1.0.0 <2.0.0-0" }
    { "~>1" ">=1.0.0 <2.0.0-0" }
    { "~> 1" ">=1.0.0 <2.0.0-0" }
    { "~1.0" ">=1.0.0 <1.1.0-0" }
    { "~ 1.0" ">=1.0.0 <1.1.0-0" }
    { "^0" "<1.0.0-0" }
    { "^ 1" ">=1.0.0 <2.0.0-0" }
    { "^0.1" ">=0.1.0 <0.2.0-0" }
    { "^1.0" ">=1.0.0 <2.0.0-0" }
    { "^1.2" ">=1.2.0 <2.0.0-0" }
    { "^0.0.1" ">=0.0.1 <0.0.2-0" }
    { "^0.0.1-beta" ">=0.0.1-beta <0.0.2-0" }
    { "^0.1.2" ">=0.1.2 <0.2.0-0" }
    { "^1.2.3" ">=1.2.3 <2.0.0-0" }
    { "^1.2.3-beta.4" ">=1.2.3-beta.4 <2.0.0-0" }
    { "<1" "<1.0.0-0" }
    { "< 1" "<1.0.0-0" }
    { ">=1" ">=1.0.0" }
    { ">= 1" ">=1.0.0" }
    { "<1.2" "<1.2.0-0" }
    { "< 1.2" "<1.2.0-0" }
    { "1" ">=1.0.0 <2.0.0-0" }
    { ">01.02.03" ">1.2.3" }
    ! { ">01.02.03" null" }
    ! { "~1.2.3beta" ">=1.2.3-beta <1.3.0-0" }
    ! { "~1.2.3beta" null" }
    { "^ 1.2 ^ 1" ">=1.2.0 <2.0.0-0 >=1.0.0" }
    { "1.2 - 3.4.5" ">=1.2.0 <=3.4.5" }
    { "1.2.3 - 3.4" ">=1.2.3 <3.5.0-0" }
    { "1.2 - 3.4" ">=1.2.0 <3.5.0-0" }
    { ">1" ">=2.0.0" }
    { ">1.2" ">=1.3.0" }
    { ">X" "<0.0.0-0" }
    { "<X" "<0.0.0-0" }
    { "<x <* || >* 2.x" "<0.0.0-0" }
    { ">x 2.x || * || <x" "*" }
}