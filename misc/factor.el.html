<html><head><title>C:\cygwin\home\Slava\factor/misc/factor.el</title><style>.NULL {
color: #000000;
}
.COMMENT1 {
color: #cc0000;
}
.COMMENT2 {
color: #ff8400;
}
.COMMENT3 {
color: #6600cc;
}
.COMMENT4 {
color: #cc6600;
}
.DIGIT {
color: #ff0000;
}
.FUNCTION {
color: #9966ff;
}
.INVALID {
background: #ffffcc;
color: #ff0066;
}
.KEYWORD1 {
color: #006699;
font-weight: bold;
}
.KEYWORD2 {
color: #009966;
font-weight: bold;
}
.KEYWORD3 {
color: #0099ff;
font-weight: bold;
}
.KEYWORD4 {
color: #66ccff;
font-weight: bold;
}
.LABEL {
color: #02b902;
}
.LITERAL1 {
color: #ff00cc;
}
.LITERAL2 {
color: #cc00cc;
}
.LITERAL3 {
color: #9900cc;
}
.LITERAL4 {
color: #6600cc;
}
.MARKUP {
color: #0000ff;
}
.OPERATOR {
color: #000000;
font-weight: bold;
}
</style></head><body><pre><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>Eduardo</span><span class='COMMENT2'> </span><span class='COMMENT2'>Cavazos</span><span class='COMMENT2'> </span><span class='COMMENT2'>-</span><span class='COMMENT2'> </span><span class='COMMENT2'>wayo.cavazos@gmail.com</span><br/><br/><span class='COMMENT4'>;;;;</span><span class='COMMENT4'>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>Add</span><span class='COMMENT2'> </span><span class='COMMENT2'>these</span><span class='COMMENT2'> </span><span class='COMMENT2'>lines</span><span class='COMMENT2'> </span><span class='COMMENT2'>to</span><span class='COMMENT2'> </span><span class='COMMENT2'>your</span><span class='COMMENT2'> </span><span class='COMMENT2'>.emacs</span><span class='COMMENT2'> </span><span class='COMMENT2'>file:</span><br/><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>(load-file</span><span class='COMMENT2'> </span><span class='COMMENT2'>&quot;/scratch/repos/Factor/misc/factor.el&quot;)</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>(setq</span><span class='COMMENT2'> </span><span class='COMMENT2'>factor-binary</span><span class='COMMENT2'> </span><span class='COMMENT2'>&quot;/scratch/repos/Factor/factor&quot;)</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>(setq</span><span class='COMMENT2'> </span><span class='COMMENT2'>factor-image</span><span class='COMMENT2'> </span><span class='COMMENT2'>&quot;/scratch/repos/Factor/factor.image&quot;)</span><br/><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>Of</span><span class='COMMENT2'> </span><span class='COMMENT2'>course,</span><span class='COMMENT2'> </span><span class='COMMENT2'>you&apos;ll</span><span class='COMMENT2'> </span><span class='COMMENT2'>have</span><span class='COMMENT2'> </span><span class='COMMENT2'>to</span><span class='COMMENT2'> </span><span class='COMMENT2'>edit</span><span class='COMMENT2'> </span><span class='COMMENT2'>the</span><span class='COMMENT2'> </span><span class='COMMENT2'>directory</span><span class='COMMENT2'> </span><span class='COMMENT2'>paths</span><span class='COMMENT2'> </span><span class='COMMENT2'>for</span><span class='COMMENT2'> </span><span class='COMMENT2'>your</span><span class='COMMENT2'> </span><span class='COMMENT2'>system</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>accordingly.</span><br/><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>That&apos;s</span><span class='COMMENT2'> </span><span class='COMMENT2'>all</span><span class='COMMENT2'> </span><span class='COMMENT2'>you</span><span class='COMMENT2'> </span><span class='COMMENT2'>have</span><span class='COMMENT2'> </span><span class='COMMENT2'>to</span><span class='COMMENT2'> </span><span class='COMMENT2'>do</span><span class='COMMENT2'> </span><span class='COMMENT2'>to</span><span class='COMMENT2'> </span><span class='COMMENT2'>&quot;install&quot;</span><span class='COMMENT2'> </span><span class='COMMENT2'>factor.el</span><span class='COMMENT2'> </span><span class='COMMENT2'>on</span><span class='COMMENT2'> </span><span class='COMMENT2'>your</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>system.</span><span class='COMMENT2'> </span><span class='COMMENT2'>Whenever</span><span class='COMMENT2'> </span><span class='COMMENT2'>you</span><span class='COMMENT2'> </span><span class='COMMENT2'>edit</span><span class='COMMENT2'> </span><span class='COMMENT2'>a</span><span class='COMMENT2'> </span><span class='COMMENT2'>factor</span><span class='COMMENT2'> </span><span class='COMMENT2'>file,</span><span class='COMMENT2'> </span><span class='COMMENT2'>Emacs</span><span class='COMMENT2'> </span><span class='COMMENT2'>will</span><span class='COMMENT2'> </span><span class='COMMENT2'>know</span><span class='COMMENT2'> </span><span class='COMMENT2'>to</span><span class='COMMENT2'> </span><span class='COMMENT2'>switch</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>to</span><span class='COMMENT2'> </span><span class='COMMENT2'>Factor</span><span class='COMMENT2'> </span><span class='COMMENT2'>mode.</span><br/><span class='COMMENT4'>;;;;</span><span class='COMMENT4'>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br/><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>M-x</span><span class='COMMENT2'> </span><span class='COMMENT2'>run-factor</span><span class='COMMENT2'> </span><span class='COMMENT2'>===</span><span class='COMMENT2'> </span><span class='COMMENT2'>Start</span><span class='COMMENT2'> </span><span class='COMMENT2'>a</span><span class='COMMENT2'> </span><span class='COMMENT2'>Factor</span><span class='COMMENT2'> </span><span class='COMMENT2'>listener</span><span class='COMMENT2'> </span><span class='COMMENT2'>inside</span><span class='COMMENT2'> </span><span class='COMMENT2'>Emacs</span><br/><br/><span class='COMMENT4'>;;;;</span><span class='COMMENT4'>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br/><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>BUG:</span><span class='COMMENT2'> </span><span class='COMMENT2'>A</span><span class='COMMENT2'> </span><span class='COMMENT2'>double</span><span class='COMMENT2'> </span><span class='COMMENT2'>quote</span><span class='COMMENT2'> </span><span class='COMMENT2'>character</span><span class='COMMENT2'> </span><span class='COMMENT2'>on</span><span class='COMMENT2'> </span><span class='COMMENT2'>a</span><span class='COMMENT2'> </span><span class='COMMENT2'>commented</span><span class='COMMENT2'> </span><span class='COMMENT2'>line</span><span class='COMMENT2'> </span><span class='COMMENT2'>will</span><span class='COMMENT2'> </span><span class='COMMENT2'>break</span><span class='COMMENT2'> </span><span class='COMMENT2'>the</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>syntax</span><span class='COMMENT2'> </span><span class='COMMENT2'>highlighting</span><span class='COMMENT2'> </span><span class='COMMENT2'>for</span><span class='COMMENT2'> </span><span class='COMMENT2'>that</span><span class='COMMENT2'> </span><span class='COMMENT2'>line.</span><br/><br/>(defgroup factor <span class='LITERAL2'>nil</span><br/>  <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>Factor</span><span class='LITERAL1'> </span><span class='LITERAL1'>mode</span><span class='LITERAL1'>&quot;</span><br/>  :group <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>languages</span>)<br/><br/>(<span class='KEYWORD1'>defvar</span> factor-mode-syntax-table <span class='LITERAL2'>nil</span><br/>  <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>Syntax</span><span class='LITERAL1'> </span><span class='LITERAL1'>table</span><span class='LITERAL1'> </span><span class='LITERAL1'>used</span><span class='LITERAL1'> </span><span class='LITERAL1'>while</span><span class='LITERAL1'> </span><span class='LITERAL1'>in</span><span class='LITERAL1'> </span><span class='LITERAL1'>Factor</span><span class='LITERAL1'> </span><span class='LITERAL1'>mode.</span><span class='LITERAL1'>&quot;</span>)<br/><br/>(<span class='KEYWORD2'>if</span> factor-mode-syntax-table<br/>    ()<br/>  (<span class='KEYWORD2'>let</span> ((i <span class='DIGIT'>0</span>))<br/>    (<span class='KEYWORD3'>setq</span> factor-mode-syntax-table (make-syntax-table))<br/><br/>    <span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>Default</span><span class='COMMENT2'> </span><span class='COMMENT2'>is</span><span class='COMMENT2'> </span><span class='COMMENT2'>atom-constituent</span><br/>    (while (<span class='KEYWORD3'>&lt;</span> i <span class='DIGIT'>256</span>)<br/>      (modify-syntax-entry i <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>_</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>      (<span class='KEYWORD3'>setq</span> i (<span class='KEYWORD3'>1+</span> i)))<br/><br/>    <span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>Word</span><span class='COMMENT2'> </span><span class='COMMENT2'>components.</span><br/>    (<span class='KEYWORD3'>setq</span> i ?0)<br/>    (while (<span class='KEYWORD3'>&lt;=</span> i ?9)<br/>      (modify-syntax-entry i <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>w</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>      (<span class='KEYWORD3'>setq</span> i (<span class='KEYWORD3'>1+</span> i)))<br/>    (<span class='KEYWORD3'>setq</span> i ?A)<br/>    (while (<span class='KEYWORD3'>&lt;=</span> i ?Z)<br/>      (modify-syntax-entry i <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>w</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>      (<span class='KEYWORD3'>setq</span> i (<span class='KEYWORD3'>1+</span> i)))<br/>    (<span class='KEYWORD3'>setq</span> i ?a)<br/>    (while (<span class='KEYWORD3'>&lt;=</span> i ?z)<br/>      (modify-syntax-entry i <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>w</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>      (<span class='KEYWORD3'>setq</span> i (<span class='KEYWORD3'>1+</span> i)))<br/><br/>    <span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>Whitespace</span><br/>    (modify-syntax-entry ?\t <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?\n <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>&gt;</span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?\f <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?\r <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?  <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/><br/>    (modify-syntax-entry ?\[ <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>(]</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?\] <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>)[</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?{ <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>(}</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?} <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>){</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/><br/>    (modify-syntax-entry ?\( <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>()</span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?\) <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>)(</span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)<br/>    (modify-syntax-entry ?\&quot; <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span> factor-mode-syntax-table)))<br/><br/>(<span class='KEYWORD1'>defvar</span> factor-mode-map (make-sparse-keymap))<br/>    <br/>(defcustom factor-mode-hook <span class='LITERAL2'>nil</span><br/>  <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>Hook</span><span class='LITERAL1'> </span><span class='LITERAL1'>run</span><span class='LITERAL1'> </span><span class='LITERAL1'>when</span><span class='LITERAL1'> </span><span class='LITERAL1'>entering</span><span class='LITERAL1'> </span><span class='LITERAL1'>Factor</span><span class='LITERAL1'> </span><span class='LITERAL1'>mode.</span><span class='LITERAL1'>&quot;</span><br/>  :type <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>hook</span><br/>  :group <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor</span>)<br/><br/>(defconst factor-font-lock-keywords<br/>  <span class='NULL'>&apos;(</span>(<span class='LITERAL1'>&quot;</span><span class='LITERAL1'>#!.*$</span><span class='LITERAL1'>&quot;</span> . font-lock-comment-face)<br/>    (<span class='LITERAL1'>&quot;</span><span class='LITERAL1'>!(</span><span class='LITERAL1'> </span><span class='LITERAL1'>.*</span><span class='LITERAL1'> </span><span class='LITERAL1'>)</span><span class='LITERAL1'>&quot;</span> . font-lock-comment-face)<br/>    (<span class='LITERAL1'>&quot;</span><span class='LITERAL1'>^!.*$</span><span class='LITERAL1'>&quot;</span> . font-lock-comment-face)<br/>    (<span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>!.*$</span><span class='LITERAL1'>&quot;</span> . font-lock-comment-face)<br/>    (<span class='LITERAL1'>&quot;</span><span class='LITERAL1'>(</span><span class='LITERAL1'> </span><span class='LITERAL1'>.*</span><span class='LITERAL1'> </span><span class='LITERAL1'>)</span><span class='LITERAL1'>&quot;</span> . font-lock-comment-face)<br/>    <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>MAIN:</span><span class='LITERAL1'>&quot;</span><br/>    <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>IN:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>USING:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>TUPLE:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>^C:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>^M:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>USE:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>REQUIRE:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>PROVIDE:</span><span class='LITERAL1'>&quot;</span><br/>    <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>REQUIRES:</span><span class='LITERAL1'>&quot;</span><br/>    <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>GENERIC:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>GENERIC#</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>SYMBOL:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>PREDICATE:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>VAR:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>VARS:</span><span class='LITERAL1'>&quot;</span><br/>    <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>C-STRUCT:</span><span class='LITERAL1'>&quot;</span><br/>    <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>C-UNION:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>&lt;PRIVATE</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>PRIVATE&gt;</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>MACRO:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>MACRO::</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>DEFER:</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>TYPEDEF:</span><span class='LITERAL1'>&quot;</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-mode ()<br/>  <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>A</span><span class='LITERAL1'> </span><span class='LITERAL1'>mode</span><span class='LITERAL1'> </span><span class='LITERAL1'>for</span><span class='LITERAL1'> </span><span class='LITERAL1'>editing</span><span class='LITERAL1'> </span><span class='LITERAL1'>programs</span><span class='LITERAL1'> </span><span class='LITERAL1'>written</span><span class='LITERAL1'> </span><span class='LITERAL1'>in</span><span class='LITERAL1'> </span><span class='LITERAL1'>the</span><span class='LITERAL1'> </span><span class='LITERAL1'>Factor</span><span class='LITERAL1'> </span><span class='LITERAL1'>programming</span><span class='LITERAL1'> </span><span class='LITERAL1'>language.</span><span class='LITERAL1'>&quot;</span><br/>  (interactive)<br/>  (kill-all-local-variables)<br/>  (use-local-map factor-mode-map)<br/>  (<span class='KEYWORD3'>setq</span> major-mode <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-mode</span>)<br/>  (<span class='KEYWORD3'>setq</span> mode-name <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>Factor</span><span class='LITERAL1'>&quot;</span>)<br/>  (make-local-variable <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>comment-start</span>)<br/>  (<span class='KEYWORD3'>setq</span> comment-start <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>!</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span>)<br/>  (make-local-variable <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>font-lock-defaults</span>)<br/>  (<span class='KEYWORD3'>setq</span> font-lock-defaults<br/>	<span class='NULL'>&apos;(</span>factor-font-lock-keywords <span class='LITERAL2'>nil</span> <span class='LITERAL2'>nil</span> <span class='LITERAL2'>nil</span> <span class='LITERAL2'>nil</span>))<br/>  (set-syntax-table factor-mode-syntax-table)<br/>  (run-hooks <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-mode-hooks</span>))<br/><br/>(add-to-list <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>auto-mode-alist</span> <span class='NULL'>&apos;(</span><span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\\.factor\\&apos;</span><span class='LITERAL1'>&quot;</span> . factor-mode))<br/><br/><span class='COMMENT4'>;;;;</span><span class='COMMENT4'>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br/><br/>(<span class='KEYWORD2'>require</span> <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>comint</span>)<br/><br/>(<span class='KEYWORD1'>defvar</span> factor-binary <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>/scratch/repos/Factor/factor</span><span class='LITERAL1'>&quot;</span>)<br/>(<span class='KEYWORD1'>defvar</span> factor-image <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>/scratch/repos/Factor/factor.image</span><span class='LITERAL1'>&quot;</span>)<br/><br/>(<span class='KEYWORD1'>defun</span> factor-telnet-to-port (port)<br/>  (interactive <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>nPort:</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span>)<br/>  (switch-to-buffer<br/>   (make-comint-in-buffer <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>factor-telnet</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL2'>nil</span> (<span class='KEYWORD3'>cons</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>localhost</span><span class='LITERAL1'>&quot;</span> port))))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-telnet ()<br/>  (interactive)<br/>  (factor-telnet-to-port <span class='DIGIT'>9000</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-telnet-factory ()<br/>  (interactive)<br/>  (factor-telnet-to-port <span class='DIGIT'>9010</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-run-file ()<br/>  (interactive)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> (<span class='KEYWORD3'>format</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\&quot;%s\&quot;</span><span class='LITERAL1'>&quot;</span> (buffer-file-name)))<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>run-file\n</span><span class='LITERAL1'>&quot;</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-send-region (start end)<br/>  (interactive <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>r</span><span class='LITERAL1'>&quot;</span>)<br/>  (comint-send-region <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> start end)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\n</span><span class='LITERAL1'>&quot;</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-see ()<br/>  (interactive)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\\</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span>)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> (thing-at-point <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>sexp</span>))<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>see\n</span><span class='LITERAL1'>&quot;</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-help ()<br/>  (interactive)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\\</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span>)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> (thing-at-point <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>sexp</span>))<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>help\n</span><span class='LITERAL1'>&quot;</span>))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-edit ()<br/>  (interactive)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\\</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span>)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> (thing-at-point <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>sexp</span>))<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'> </span><span class='LITERAL1'>edit\n</span><span class='LITERAL1'>&quot;</span>))<br/>  <br/>(<span class='KEYWORD1'>defun</span> factor-comment-line ()<br/>  (interactive)<br/>  (beginning-of-line)<br/>  (insert <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>!</span><span class='LITERAL1'> </span><span class='LITERAL1'>&quot;</span>))<br/><br/>(define-key factor-mode-map <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\C-c\C-f</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-run-file</span>)<br/>(define-key factor-mode-map <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\C-c\C-r</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-send-region</span>)<br/>(define-key factor-mode-map <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\C-c\C-s</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-see</span>)<br/>(define-key factor-mode-map <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\C-ce</span><span class='LITERAL1'>&quot;</span>    <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-edit</span>)<br/>(define-key factor-mode-map <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\C-c\C-h</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-help</span>)<br/>(define-key factor-mode-map <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>\C-cc</span><span class='LITERAL1'>&quot;</span>    <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>comment-region</span>)<br/>(define-key factor-mode-map [<span class='KEYWORD2'>return</span>]   <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>newline-and-indent</span>)<br/><br/><span class='COMMENT4'>;;;;</span><span class='COMMENT4'>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br/><span class='COMMENT2'>;;</span><span class='COMMENT2'> </span><span class='COMMENT2'>factor-listener-mode</span><br/><span class='COMMENT4'>;;;;</span><span class='COMMENT4'>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span><br/><br/>(define-derived-mode factor-listener-mode comint-mode <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>Factor</span><span class='LITERAL1'> </span><span class='LITERAL1'>Listener</span><span class='LITERAL1'>&quot;</span>)<br/><br/>(define-key factor-listener-mode-map [f8] <span class='LITERAL1'>&apos;</span><span class='LITERAL1'>factor-refresh-all</span>)<br/><br/>(<span class='KEYWORD1'>defun</span> run-factor ()<br/>  (interactive)<br/>  (switch-to-buffer<br/>   (make-comint-in-buffer <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>factor</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL2'>nil</span> factor-binary <span class='LITERAL2'>nil</span><br/>			  (concat <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>-i=</span><span class='LITERAL1'>&quot;</span> factor-image)<br/>			  <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>-run=listener</span><span class='LITERAL1'>&quot;</span>))<br/>  (factor-listener-mode))<br/><br/>(<span class='KEYWORD1'>defun</span> factor-refresh-all ()<br/>  (interactive)<br/>  (comint-send-string <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>*factor*</span><span class='LITERAL1'>&quot;</span> <span class='LITERAL1'>&quot;</span><span class='LITERAL1'>refresh-all\n</span><span class='LITERAL1'>&quot;</span>))<br/></pre></body></html>